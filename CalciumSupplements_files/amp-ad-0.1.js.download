(window.AMP = window.AMP || []).push({n:"amp-ad", f:(function(AMP) {var process={env:{NODE_ENV:"production"}};var n;function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]}var u="";
function w(){var a=void 0,b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;if(c.context&&c.context.mode)c=c.context.mode;else{var d=aa(c.location.originalHash||c.location.hash),f=aa(c.location.search);u||(u=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"1477334765771");c={localDev:!1,development:!("1"!=d.development&&!c.AMP_DEV_MODE),filter:d.filter,minified:!0,lite:void 0!=f.amp_lite,test:!1,log:d.log,version:u}}c=b.AMP_MODE=c}return c}
function aa(a){var b=Object.create(null);if(!a)return b;if(0==a.indexOf("?")||0==a.indexOf("#"))a=a.substr(1);for(var c=a.split("&"),d=0;d<c.length;d++){var f=c[d],e=f.indexOf("="),g,k;-1!=e?(g=decodeURIComponent(f.substring(0,e)).trim(),k=decodeURIComponent(f.substring(e+1)).trim()):(g=decodeURIComponent(f).trim(),k="");g&&(b[g]=k)}return b};(new Date).getTime();self.log=self.log||{user:null,dev:null};var y=self.log;function z(){if(y.user)return y.user;throw Error("failed to call initLogConstructor");}function A(){if(y.dev)return y.dev;throw Error("failed to call initLogConstructor");};function ba(a,b){a=a.__AMP_TOP||a;var c=a.services&&a.services[b]&&a.services[b].obj;return c}function B(a){var b=ca(a);return b&&b.services&&b.services.viewer&&b.services.viewer.obj}function da(a,b,c){a=a.__AMP_TOP||a;return ea(a,a,b,c?c:void 0)}function fa(a,b){var c=ga(a);return ea(ca(c),c,"documentInfo",b)}function ga(a){return a.nodeType?da((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function ca(a){a=ga(a);return a.isSingleDoc()?a.win:a}
function ea(a,b,c,d){var f=C(a),e=f[c];e||(e=f[c]={obj:null,promise:null,resolve:null});e.obj||(e.obj=d(b),e.resolve&&e.resolve(e.obj));return e.obj}function ha(a,b){var c=ia(a,b);if(c)return c;a=C(a);var d,f=new Promise(function(a){d=a});a[b]={obj:null,promise:f,resolve:d};return f}function ia(a,b){if(a=C(a)[b]){if(b=a.promise)return b;if(a.obj)return a.promise=Promise.resolve(a.obj)}return null}function C(a){var b=a.services;b||(b=a.services={});return b};function ja(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var f=new d.MutationObserver(function(){b(a)&&(f.disconnect(),c())});f.observe(a,{childList:!0})}else var e=d.setInterval(function(){b(a)&&(d.clearInterval(e),c())},5)}}function ka(a,b){ja(a.documentElement,function(){return!!a.body},b)}function la(a){return new Promise(function(b){ka(a,b)})}function ma(a,b){for(var c=a;c;c=c.parentElement)if(b(c))return c;return null}
function na(a){var b="amp-ad";if(a.closest)return a.closest(b);b=b.toUpperCase();return ma(a,function(a){return a.tagName==b})};function oa(a){var b="amp-user-notification";return pa(a,"userNotificationManager",b).then(function(a){return z().assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager",b,b,b)})}
function pa(a,b,c){var d=ia(a,b);return d?d:Promise.resolve().then(function(){return a.ampExtendedElements&&a.ampExtendedElements[c]?ha(a,b):la(a.document).then(function(){return a.ampExtendedElements&&a.ampExtendedElements[c]?ha(a,b):null})})};var qa={_ping_:{renderStartImplemented:!0},a9:{prefetch:"https://c.amazon-adsystem.com/aax2/assoc.js"},accesstrade:{prefetch:"https://h.accesstrade.net/js/amp/amp.js"},adblade:{prefetch:"https://web.adblade.com/js/ads/async/show.js",preconnect:["https://staticd.cdn.adblade.com","https://static.adblade.com"]},adform:{},adgeneration:{prefetch:"https://i.socdm.com/sdk/js/adg-script-loader.js"},adition:{},adman:{},adreactor:{},adsense:{prefetch:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",
preconnect:"https://googleads.g.doubleclick.net",clientIdScope:"AMP_ECID_GOOGLE"},adsnative:{prefetch:"https://static.adsnative.com/static/js/render.v1.js",preconnect:"https://api.adsnative.com"},adspirit:{},adstir:{prefetch:"https://js.ad-stir.com/js/adstir_async.js",preconnect:"https://ad.ad-stir.com"},adtech:{prefetch:"https://s.aolcdn.com/os/ads/adsWrapper3.js",preconnect:["https://mads.at.atwola.com","https://aka-cdn.adtechus.com"]},aduptech:{prefetch:"https://s.d.adup-tech.com/jsapi"},advertserve:{renderStartImplemented:!0},
affiliateb:{prefetch:"https://track.affiliate-b.com/amp/a.js",renderStartImplemented:!0},amoad:{prefetch:["https://j.amoad.com/js/a.js","https://j.amoad.com/js/n.js"],preconnect:["https://d.amoad.com","https://i.amoad.com","https://m.amoad.com","https://v.amoad.com"]},appnexus:{prefetch:"https://acdn.adnxs.com/ast/ast.js",preconnect:"https://ib.adnxs.com"},atomx:{prefetch:"https://s.ato.mx/p.js"},caprofitx:{prefetch:["https://cdn.caprofitx.com/pfx.min.js","https://cdn.caprofitx.com/tags/amp/profitx_amp.js"],
preconnect:"https://ad.caprofitx.adtdp.com"},chargeads:{},colombia:{prefetch:"https://static.clmbtech.com/ad/commons/js/colombia-amp.js"},contentad:{},criteo:{prefetch:"https://static.criteo.net/js/ld/publishertag.js",preconnect:"https://cas.criteo.com"},dotandads:{prefetch:"https://amp.ad.dotandad.com/dotandadsAmp.js",preconnect:"https://bal.ad.dotandad.com"},doubleclick:{prefetch:["https://www.googletagservices.com/tag/js/gpt.js","https://securepubads.g.doubleclick.net/static/glade.js"],preconnect:["https://partner.googleadservices.com",
"https://tpc.googlesyndication.com"],clientIdScope:"AMP_ECID_GOOGLE",renderStartImplemented:!0},eplanning:{prefetch:"https://us.img.e-planning.net/layers/epl-amp.js"},ezoic:{prefetch:["https://www.googletagservices.com/tag/js/gpt.js","https://g.ezoic.net/ezoic/ampad.js"]},flite:{},genieessp:{prefetch:"https://js.gsspcln.jp/l/amp.js"},gmossp:{prefetch:"https://cdn.gmossp-sp.jp/ads/amp.js"},ibillboard:{},imobile:{prefetch:"https://spamp.i-mobile.co.jp/script/amp.js",preconnect:"https://spad.i-mobile.co.jp"},
improvedigital:{},industrybrains:{prefetch:"https://web.industrybrains.com/js/ads/async/show.js",preconnect:["https://staticd.cdn.industrybrains.com","https://static.industrybrains.com"]},inmobi:{prefetch:"https://cf.cdn.inmobi.com/ad/inmobi.secure.js",renderStartImplemented:!0},kargo:{},loka:{prefetch:"https://loka-cdn.akamaized.net/scene/amp.js",preconnect:["https://scene-front.lokaplatform.com","https://loka-materials.akamaized.net"],renderStartImplemented:!0},mads:{prefetch:"https://eu2.madsone.com/js/tags.js"},
"mantis-display":{prefetch:"https://assets.mantisadnetwork.com/mantodea.min.js",preconnect:["https://mantodea.mantisadnetwork.com","https://res.cloudinary.com","https://resize.mantisadnetwork.com"]},"mantis-recommend":{prefetch:"https://assets.mantisadnetwork.com/recommend.min.js",preconnect:["https://mantodea.mantisadnetwork.com","https://resize.mantisadnetwork.com"]},mediaimpact:{prefetch:"https://ec-ns.sascdn.com/diff/251/pages/amp_default.js",preconnect:["https://ww251.smartadserver.com","https://static.sascdn.com/"],
renderStartImplemented:!0},meg:{renderStartImplemented:!0},microad:{prefetch:"https://j.microad.net/js/camp.js",preconnect:["https://s-rtb.send.microad.jp","https://s-rtb.send.microadinc.com","https://cache.send.microad.jp","https://cache.send.microadinc.com","https://deb.send.microad.jp"]},mixpo:{prefetch:"https://cdn.mixpo.com/js/loader.js",preconnect:["https://player1.mixpo.com","https://player2.mixpo.com"]},nativo:{prefetch:"https://s.ntv.io/serve/load.js"},nend:{prefetch:"https://js1.nend.net/js/amp.js",
preconnect:["https://output.nend.net","https://img1.nend.net"]},nokta:{prefetch:"https://static.virgul.com/theme/mockups/noktaamp/ampjs.js",renderStartImplemented:!0},openadstream:{},openx:{prefetch:"https://www.googletagservices.com/tag/js/gpt.js",preconnect:["https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"]},plista:{},pubmatic:{prefetch:"https://ads.pubmatic.com/AdServer/js/amp.js"},pubmine:{prefetch:"https://s.pubmine.com/showad.js"},
pulsepoint:{prefetch:"https://ads.contextweb.com/TagPublish/getjs.static.js",preconnect:"https://tag.contextweb.com"},purch:{prefetch:"https://ramp.purch.com/serve/creative_amp.js",renderStartImplemented:!0},revcontent:{prefetch:"https://labs-cdn.revcontent.com/build/amphtml/revcontent.amp.min.js",preconnect:["https://trends.revcontent.com","https://cdn.revcontent.com","https://img.revcontent.com"]},rubicon:{},sharethrough:{renderStartImplemented:!0},smartadserver:{prefetch:"https://ec-ns.sascdn.com/diff/js/amp.v0.js",
preconnect:"https://static.sascdn.com",renderStartImplemented:!0},sortable:{prefetch:"https://www.googletagservices.com/tag/js/gpt.js",preconnect:["https://tags-cdn.deployads.com","https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"]},sovrn:{prefetch:"https://ap.lijit.com/www/sovrn_amp/sovrn_ads.js"},taboola:{},teads:{prefetch:"https://cdn.teads.tv/media/format/v3/teads-format.min.js",preconnect:["https://cdn2.teads.tv","https://a.teads.tv",
"https://t.teads.tv"]},triplelift:{},webediads:{prefetch:"https://eu1.wbdds.com/amp.min.js",preconnect:["https://goutee.top","https://mediaathay.org.uk"],renderStartImplemented:!0},"weborama-display":{prefetch:["https://cstatic.weborama.fr/js/advertiserv2/adperf_launch_1.0.0_scrambled.js","https://cstatic.weborama.fr/js/advertiserv2/adperf_core_1.0.0_scrambled.js"]},widespace:{},yahoojp:{prefetch:["https://s.yimg.jp/images/listing/tool/yads/ydn/amp/amp.js","https://yads.c.yimg.jp/js/yads.js"],preconnect:"https://yads.yahoo.co.jp"},
yieldbot:{prefetch:["https://cdn.yldbt.com/js/yieldbot.intent.amp.js","https://msg.yldbt.com/js/ybmsg.html"],preconnect:"https://i.yldbt.com"},yieldmo:{prefetch:"https://static.yieldmo.com/ym.amp1.js",preconnect:["https://s.yieldmo.com","https://ads.yieldmo.com"],renderStartImplemented:!0},yieldone:{prefetch:"https://img.ak.impact-ad.jp/ic/pone/commonjs/yone-amp.js"},zergnet:{},zucks:{preconnect:["https://j.zucks.net.zimg.jp","https://sh.zucks.net","https://k.zucks.net","https://static.zucks.net.zimg.jp"]}};function D(a){return ba(a,"timer")};function ra(a){var b=qa[a.element.getAttribute("type")],c=b?b.clientIdScope:null;if(!c)return Promise.resolve();var d=pa(a.win,"cid","amp-analytics").then(function(a){if(a)return a.get(c,Promise.resolve()).catch(function(a){A().error("ad-cid",a)})});return D(a.win).timeoutPromise(1E3,d,"cid timeout").catch(function(a){A().warn("ad-cid",a)})};function sa(a){return a.replace(/-([a-z])/g,function(a,c){return c.toUpperCase()})}function ta(a){var b=".localhost",c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};var G=self.AMP_CONFIG||{},ua=G.thirdPartyUrl||"https://3p.ampproject.net",va=G.thirdPartyFrameHost||"ampproject.net",wa=G.cdnUrl||"https://cdn.ampproject.org";var H,I,xa=/[?&]amp_js[^&]*/;
function J(a){var b;H||(H=self.document.createElement("a"),I=self.UrlCache||(self.UrlCache=Object.create(null)));var c=I[a];if(c)return c;H.href=a;H.protocol||(H.href=H.href);var d={href:H.href,protocol:H.protocol,host:H.host,hostname:H.hostname,port:"0"==H.port?"":H.port,pathname:H.pathname,search:H.search,hash:H.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=H.origin&&"null"!=
H.origin?H.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;var f=d;return b?f:I[a]=f}function K(a){"string"==typeof a&&(a=J(a));var b=a.pathname.split("/")[1];return a.origin==wa||0==a.origin.indexOf("http://localhost:")&&("c"==b||"v"==b)};function ya(a){return fa(a,function(a){var b=a.getUrl(),d;d=b;"string"==typeof d&&(d=J(d));if(K(d)){var f=d.pathname.split("/"),e=f[1];z().assert("c"==e||"v"==e,"Unknown path prefix in url %s",d.href);var e=f[2],g="s"==e?"https://"+decodeURIComponent(f[3]):"http://"+decodeURIComponent(e);z().assert(0<g.indexOf("."),"Expected a . in origin %s",g);f.splice(1,"s"==e?3:2);f=g+f.join("/");e=(e=d.search)&&"?"!=e?(e=e.replace(xa,"").replace(/^[?&]/,""))?"?"+e:"":"";d=f+e+(d.hash||"")}else d=d.href;var k=
d,h=a.getRootNode(),l=h&&h.AMP&&h.AMP.canonicalUrl;if(!l)var m=z().assert(h.querySelector("link[rel=canonical]"),"AMP files are required to have a <link rel=canonical> tag."),l=J(m.href).href;a=String(Math.floor(1E4*a.win.Math.random()));return{url:b,sourceUrl:k,canonicalUrl:l,pageViewId:a}})};var L;function M(a,b){var c=L||(L=Object.create(null));if(b in c)a=c[b];else{var d=b;a=-1!=za(a).indexOf(d)?!0:a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(d)?Math.random()<a.AMP_CONFIG[d]:!1;a=c[b]=a}return a}
function za(a){if(a._experimentCookie)return a._experimentCookie;var b;a:{b:{try{b=a.document.cookie;break b}catch(g){}b=void 0}if(b){b=b.split(";");for(var c=0;c<b.length;c++){var d=b[c].trim(),f=d.indexOf("=");if(-1!=f&&"AMP_EXP"==decodeURIComponent(d.substring(0,f).trim())){b=decodeURIComponent(d.substring(f+1).trim());break a}}}b=null}var e=b;return a._experimentCookie=e?e.split(/\s*,\s*/g):[]};function Aa(a,b,c,d,f){var e=b.dataset&&b.dataset.multiSize;if(a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle)&&!e&&K(a.location)){var e=c,g=d.control,k=d.experiment,h;if(!(h=B(b).getParam("exp"))){var l=a.location.search;h=Object.create(null);if(l){if(0==l.indexOf("?")||0==l.indexOf("#"))l=l.substr(1);for(var l=l.split("&"),m=0;m<l.length;m++){var r=l[m],q=r.indexOf("="),v;-1!=q?(v=decodeURIComponent(r.substring(0,q)).trim(),r=decodeURIComponent(r.substring(q+1)).trim()):(v=decodeURIComponent(r).trim(),
r="");v&&(h[v]=r)}}h=h.exp}h&&(h=(h=/(^|,)(a4a:[^,]*)/.exec(h))&&h[2])&&(l=h.split(":",2)[1],g={"-1":"117152632",0:null,1:g,2:k},g.hasOwnProperty(l)?(g=g[l],a.pageExperimentBranches=a.pageExperimentBranches||{},m=!!g,k=L||(L=Object.create(null)),h=za(a),l=-1!=h.indexOf(e)||e in k&&k[e],m=void 0!==m?m:!l,m!=l&&(m?(h.push(e),k[e]=!0):(h.splice(h.indexOf(e),1),k[e]=!1)),a.pageExperimentBranches[e]=g):A().warn("a4a-config","Unknown a4a URL parameter: ",h," expected one of -1 (manual), 0 (not in experiment), 1 (control branch), or 2 (a4a experiment branch)"));
var t={};t[c]=f;Ba(a,t);if(M(a,c)){var x=a.pageExperimentBranches[c];a=x;(e=b.getAttribute("data-experiment-id"))&&Da(Fa(e))?b.setAttribute("data-experiment-id",Ga(a,e)):b.setAttribute("data-experiment-id",a);return x==f.experiment||x==d.experiment||"117152632"==x}}return!1}
function Ba(a,b){a.pageExperimentBranches=a.pageExperimentBranches||{};for(var c in b)if(b.hasOwnProperty(c)&&!a.pageExperimentBranches.hasOwnProperty(c)&&!a.pageExperimentBranches[c]&&M(a,c)){var d=b[c],f=Object.keys(d),e=f[Math.floor(Math.random()*f.length)];a.pageExperimentBranches[c]=d[e]}}function Fa(a){return a?a.split(","):[]}function Ha(a){return Fa(a.getAttribute("data-experiment-id")).some(function(a){return"117152632"===a})}
function Da(a){return a.every(function(a){return!isNaN(parseInt(a,10))})}function Ga(a,b){return a&&!isNaN(parseInt(a,10))?b?b+","+a:a:b||""};var Ia={control:"117152650",experiment:"117152651"},Ja={control:"117152670",experiment:"117152671"};var Ka={control:"117152660",experiment:"117152661"},La={control:"117152680",experiment:"117152681"};var Ma={adsense:function(a,b){return Aa(a,b,"expAdsenseA4A",Ia,Ja)},doubleclick:function(a,b){if(a.document.querySelector("meta[name=amp-3p-iframe-src]"))return!1;var c=b.hasAttribute("data-use-beta-a4a-implementation"),d=Aa(a,b,"expDoubleclickA4A",Ka,La)||c&&(K(a.location)||!1||!1);d&&c&&!Ha(b)&&b.setAttribute("data-experiment-id","2077831");return d}};var Na={adSlotBuilt:"0",urlBuilt:"1",adRequestStart:"2",adRequestEnd:"3",extractCreativeAndSignature:"4",adResponseValidateStart:"5",renderFriendlyStart:"6",renderCrossDomainStart:"7",renderFriendlyEnd:"8",renderCrossDomainEnd:"9",preAdThrottle:"10",renderSafeFrameStart:"11",adSlotCleared:"20"},Oa={a4aProfilingRate:{on:1}};
function Pa(a){var b=a.element.getAttribute("type"),c=a.win;Ba(c,Oa);if(b="doubleclick"==b||"adsense"==b)b=a.element.getAttribute("data-experiment-id"),b=b!=Ia.control&&b!=Ja.control&&b!=Ka.control&&b!=La.control?!1:!0;return b&&M(c,"a4aProfilingRate")?new N(c,a.element,"a4a"):new O}
function N(a,b,c){this.m=a;this.g=b;this.N=c;this.m.ampAdSlotId=this.m.ampAdSlotId||0;this.m.ampAdPageCorrelator=this.m.ampAdPageCorrelator||Math.floor(Math.pow(2,52)*Math.random());this.C=this.m.ampAdSlotId++;this.K=this.N+"."+this.C;this.J=null;this.W=Date.now();this.O="https://csi.gstatic.com/csi"}N.prototype.setQqid=function(a){this.J=a};N.prototype.setPingAddress=function(a){this.O=a};
N.prototype.sendPing=function(a){var b=Na[a]||9999,c=Date.now()-this.W,d=this.J?encodeURIComponent(this.J):!1,d=d?"&qqid."+this.C+"="+d:"",f=this.g.getAttribute("data-experiment-id"),f=f?"&e="+encodeURIComponent(f):"";a=this.O+"?"+("s="+this.N)+("&v=2&it="+a+"."+c+","+a+"_"+this.C+"."+c)+("&rt=stage."+b+",slotId."+this.C)+("&c="+this.m.ampAdPageCorrelator)+"&rls=1477334765771"+(""+f+d)+("&it."+this.K+"="+a+"."+c)+("&rt."+this.K+"=stage."+b)+("&met."+this.K+"=stage_"+b+"."+c);b=this.g.ownerDocument.createElement("img");
b.setAttribute("src",a);b.setAttribute("style","position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden");b.setAttribute("aria-hidden","true");this.g.parentNode.insertBefore(b,this.g);A().info("PING",a)};function O(){}O.prototype.setQQId=function(){};O.prototype.sendPing=function(){};function P(a,b,c){function d(a){c(a);f()}var f;f=function(){a&&a.removeEventListener(b,d,!1);c=d=a=null};a.addEventListener(b,d,!1);return f}function Qa(a){var b,c;if(a.complete||"complete"==a.readyState)return Promise.resolve(a);var d=new Promise(function(d,e){b="AUDIO"===a.tagName||"VIDEO"===a.tagName?P(a,"loadstart",d):P(a,"load",d);c=P(a,"error",e)}),d=d.then(function(){return a},Ra);return Sa(d,b,c)}function Ra(a){(a=a.target)&&a.src&&(a=a.src);throw z().createError("Failed to load:",a);}
function Sa(a,b,c){var d=void 0,f;f=void 0===d?a:D(self).timeoutPromise(d||0,a);b&&f.then(b,b);c&&f.then(c,c);return f};function Ta(a,b){var c=b.data;if("string"==typeof c&&0==c.indexOf("a2a;")){var d=b.origin,f=JSON.parse(c.substr(4));b=b.source;var e=a.document.activeElement;z().assert("IFRAME"==e.tagName,"A2A request with invalid active element %s %s %s",e,f.url,d);for(var g=!1,k=b,h=e.contentWindow;k!=a.top;){if(k==h){g=!0;break}k=k.parent}z().assert(g,"A2A request from invalid source win %s %s",f.url,d);z().assert(na(e),"A2A request from non-ad frame %s %s",f.url,d);z().assert(0==f.url.indexOf(wa),"Invalid ad A2A URL %s %s",
f.url,d);B(a.document).navigateTo(f.url,"ad-"+d)}};function Ua(a,b,c){if(!(0==b&&0==c||0==a.width&&0==a.height)){b=a.left+b;c=a.top+c;var d=a.width;a=a.height;a={left:b,top:c,width:d,height:a,bottom:c+a,right:b+d}}return a};function Va(a,b){for(var c=[],d=0;d<a.length;d++){var f=a[d];b(f,d,a)||(c.push(f),a.splice(d,1),d--)}};function Wa(a,b,c){var d=a.listeningFors;!d&&c&&(d=a.listeningFors=Object.create(null));a=d||null;if(!a)return a;var f=a[b];!f&&c&&(f=a[b]=[]);return f||null}function Xa(a,b,c){var d=J(b.src).origin,f=c?b.getAttribute("data-amp-3p-sentinel"):"amp";a=Wa(a,f,!0);for(var e,f=0;f<a.length;f++){var g=a[f];if(g.frame===b){e=g;break}}e||(e={frame:b,origin:d,events:Object.create(null)},a.push(e));return e.events}
function Ya(a){for(var b={sentinel:"unlisten"},c=a.length-1;0<=c;c--){var d=a[c];if(!d.frame.contentWindow){a.splice(c,1);var f=d.events,e;for(e in f)f[e].splice(0,Infinity).forEach(function(a){a(b)})}}}
function Za(a){if(!a.listeningFors){var b=function(b){if(b.data){var d=b.data;if("string"===typeof d&&"{"===d.charAt(0))try{d=JSON.parse(d)}catch(x){A().warn("Postmessage could not be parsed. Is it in a valid JSON format?",x)}if(d.sentinel){var c;var e=d.sentinel,g=b.origin,k=b.source,h=Wa(a,e);if(h){for(var l=0;l<h.length;l++){var m=h[l],r=m.frame.contentWindow;if(r)if("amp"===e){if(m.origin===g&&r==k){c=m;break}}else{var q;if(!(q=k==r))b:{for(q=k;q&&q!=q.parent;q=q.parent)if(q==r){q=!0;break b}q=
!1}if(q){c=m;break}}else setTimeout(Ya,0,h)}c=c?c.events:null}else c=h;var v=c;if(v){var t=v[d.type];if(t)for(t=t.slice(),c=0;c<t.length;c++)(0,t[c])(d,b.source,b.origin)}}}};a.addEventListener("message",b)}}function Q(a,b,c,d,f){function e(b,d,e){if(f||d==a.contentWindow)"unlisten"==b.sentinel?h():c(b,d,e)}var g=a.ownerDocument.defaultView;Za(g);d=Xa(g,a,d);var k=d[b]||(d[b]=[]),h;k.push(e);return h=function(){if(e){var a=k.indexOf(e);-1<a&&k.splice(a,1);c=k=e=null}}}
function R(a,b,c){var d=[];"string"==typeof b&&(b=[b]);return new Promise(function(f){for(var e=0;e<b.length;e++){var g=Q(a,b[e],function(a,b,c){for(var e=0;e<d.length;e++)d[e]();f({data:a,source:b,origin:c})},c);d.push(g)}})}function $a(a,b,c,d,f){if(a.contentWindow){d.type=c;d.sentinel=f?a.getAttribute("data-amp-3p-sentinel"):"amp";var e=d;f&&(e="amp-"+JSON.stringify(d));for(a=0;a<b.length;a++)c=b[a],c.win.postMessage(e,c.origin)}}
function S(a,b,c,d){var f=this;this.a=a;this.b=c;this.s=[];this.X=Q(this.a,b,function(a,b,c){f.s.some(function(a){return a.win==b})||f.s.push({win:b,origin:c});d(a,b,c)},this.b,this.b)}S.prototype.send=function(a,b){Va(this.s,function(a){return!!a.win.parent});$a(this.a,this.s,a,b,this.b)};S.prototype.destroy=function(){this.X();this.s.length=0};function T(a,b,c){var d=this;this.o=a;this.S=D(a.win);this.inViewport_=this.R=!1;this.j=[];this.w=0;this.U=this.L.bind(this);this.P=new S(b,"send-intersections",c||!1,function(){return ab(d)});this.i=null}T.prototype.fire=function(){if(this.R){var a=this.o.element.getIntersectionChangeEntry();0<this.j.length&&this.j[this.j.length-1].time==a.time||(this.j.push(a),this.w||(this.L(),this.w=this.S.delay(this.U,100)))}};
function ab(a){a.R=!0;a.o.getVsync().measure(function(){if(a.o.isInViewport())a.onViewportCallback(!0);a.fire()})}T.prototype.onViewportCallback=function(a){if(this.inViewport_!=a)if(this.inViewport_=a,this.fire(),a){var b=this.fire.bind(this),c=this.o.getViewport().onScroll(b),d=this.o.getViewport().onChanged(b);this.i=function(){c();d()}}else this.i&&(this.i(),this.i=null)};T.prototype.L=function(){this.w=0;this.j.length&&(this.P.send("intersection",{changes:this.j}),this.j.length=0)};
T.prototype.destroy=function(){this.S.cancel(this.w);this.i&&(this.i(),this.i=null);this.P.destroy()};function U(a,b,c){this.c=a;this.g=b;this.l=this.h=this.a=null;this.b=!1;this.H=c;this.D=[];this.T=B(this.c.getAmpDoc());this.F=null}
U.prototype.startUp=function(a,b,c){var d=this;this.a=a;this.b=b;this.a.setAttribute("scrolling","no");this.c.applyFillContent(this.a);this.h=new T(this.c,this.a,b);this.l=new S(this.a,"send-embed-state",b,function(){return V(d,d.c.isInViewport())});R(this.a,"entity-id",this.b).then(function(a){d.g.creativeId=a.data.id});this.D.push(Q(this.a,"embed-size",function(a,b,c){bb(d,a.height,a.width,b,c)},this.b,this.b));this.c.config&&this.c.config.renderStartImplemented?this.F=R(this.a,["render-start",
"no-content"],this.b).then(function(a){if("render-start"==a.data.type){var b=a.data;bb(d,b.height,b.width,a.source,a.origin);d.c.lifecycleReporter&&d.c.lifecycleReporter.sendPing("renderCrossDomainStart")}else W(d)}):(this.F=R(this.a,"bootstrap-loaded",this.b),R(this.a,"no-content",this.b).then(function(){return W(d)}));c||(this.a.style.visibility="hidden");this.D.push(this.T.onVisibilityChanged(function(){V(d,d.c.isInViewport())}));this.g.appendChild(this.a);return Qa(this.a).then(function(){return D(d.c.win).timeoutPromise(1E4,
d.F,"timeout waiting for ad response").catch(function(a){W(d);z().warn("amp-ad",a)}).then(function(){d.a&&(d.a.style.visibility="")})})};U.prototype.unlayoutCallback=function(){cb(this);if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.a=null}};function W(a){a.H?a.H():z().info("no content callback was specified");cb(a)}function cb(a){a.D.forEach(function(a){return a()});a.D.length=0;a.l&&(a.l.destroy(),a.l=null);a.h&&(a.h.destroy(),a.h=null);a.H=null}
function bb(a,b,c,d,f){var e,g;void 0!==b&&(e=Math.max(a.g.offsetHeight+b-a.a.offsetHeight,b));void 0!==c&&(g=Math.max(a.g.offsetWidth+c-a.a.offsetWidth,c));void 0===e&&void 0===g||a.c.attemptChangeSize(e,g).then(function(){db(a,!0,g,e,d,f)},function(){return db(a,!1,g,e,d,f)})}function db(a,b,c,d,f,e){a.a&&$a(a.a,[{win:f,origin:e}],b?"embed-size-changed":"embed-size-denied",{requestedWidth:c,requestedHeight:d},a.b)}
function V(a,b){a.l&&a.l.send("embed-state",{inViewport:b,pageHidden:!a.T.isVisible()})}U.prototype.viewportCallback=function(a){if(this.h)this.h.onViewportCallback(a);V(this,a)};U.prototype.onLayoutMeasure=function(){this.h&&this.h.fire()};AMP.AmpAdApiHandler=U;function eb(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a}function fb(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};var X={};
function gb(a,b,c){var d=Date.now(),f=b.getAttribute("width"),e=b.getAttribute("height"),g=b.getAttribute("type");z().assert(g,"Attribute type required for <amp-ad>: %s",b);for(var k={},h=0;h<b.attributes.length;h++){var l=b.attributes[h];0==l.name.indexOf("data-")&&(k[sa(l.name.substr(5))]=l.value)}if(h=b.getAttribute("json")){var m;a:{try{m=JSON.parse(h);break a}catch(pb){}m=void 0}if(void 0===m)throw z().createError("Error parsing JSON in json attribute in element %s",b);for(var r in m)k[r]=m[r]}k.width=
fb(f);k.height=fb(e);k.type=g;var q=ya(b),v=B(b),t=a.location.href;"about:srcdoc"==t&&(t=a.parent.location.href);f=v.getUnconfirmedReferrerUrl();e=q.canonicalUrl;g=q.pageViewId;r={href:t};m=b.tagName;var h={localDev:!1,development:w().development,filter:w().filter,minified:!0,lite:w().lite,test:!1,log:w().log,version:w().version},l=!(!a.AMP_CONFIG||!a.AMP_CONFIG.canary),x=!v.isVisible(),E;E=a;for(var Ca=0,F=E;F&&F!=F.parent;F=F.parent)Ca++;E=String(Ca)+"-"+hb(E);k._context={referrer:f,canonicalUrl:e,
pageViewId:g,location:r,tagName:m,mode:h,canary:l,hidden:x,amp3pSentinel:E,initialIntersection:b.getIntersectionChangeEntry(),startTime:d};Object.assign(k._context,c);var Ea=b.getAttribute("src");Ea&&(k.src=Ea);return k}
function ib(a,b,c){c=gb(a,b,c);var d=a.document.createElement("iframe");X[c.type]||(X[c.type]=0);a=jb(a);var f=J(a).hostname;a=a+"#"+JSON.stringify(c);var e=f+"_"+c.type+"_"+X[c.type]++;d.src=a;d.name=e;d.ampLocation=J(a);d.width=c.width;d.height=c.height;d.style.border="none";d.setAttribute("scrolling","no");d.onload=function(){this.readyState="complete"};d.setAttribute("data-amp-3p-sentinel",c._context.amp3pSentinel);return d}
function kb(a,b){a=jb(a);b.preload(a,"document");var c=ua+"/1477334765771/f.js";b.preload(c,"script")}
function jb(a){var b;return da(self,"bootstrapBaseUrl",function(){var c;c=b;var d=a.document.querySelector('meta[name="amp-3p-iframe-src"]');if(d){var f=d.getAttribute("content"),e;e=void 0===e?"source":e;z().assert(null!=f,"%s %s must be available",d,e);var g=J(f);z().assert("https:"==g.protocol||/^(\/\/)/.test(f)||"localhost"==g.hostname||ta(g.hostname),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',d,e,f);z().assert(-1==
f.indexOf("?"),"3p iframe url must not include query string %s in element %s.",f,d);e=J(f);z().assert("localhost"==e.hostname&&!c||e.origin!=J(a.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.",f,e.origin,d);c=f+"?1477334765771"}else c=null;return c||"https://d-"+hb(a)+("."+va+"/1477334765771/frame.html")})}
function hb(a){var b;if(a.crypto&&a.crypto.getRandomValues){var c=new Uint32Array(2);a.crypto.getRandomValues(c);b=String(c[0])+c[1]}else b=String(a.Math.random()).substr(2)+"0";return b};function lb(a){var b=a["3pla"];b||(b={},a["3pla"]=b);var c=D(a).delay(function(){D(a).cancel(c);var b=a["3pla"];b&&delete b[c]},1E3);b[c]=1};var mb={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0};function Y(a){var b=this;AMP.BaseElement.call(this,a);this.u=this.I=this.f=this.config=this.a=null;this.M=!1;this.h=this.i=this.A=null;this.V=function(){return nb(b)};this.G=void 0;this.B=null;this.lifecycleReporter=Pa(this);this.lifecycleReporter.sendPing("adSlotBuilt")}p(Y,AMP.BaseElement);n=Y.prototype;n.getPriority=function(){return 2};
n.renderOutsideViewport=function(){var a;a:{a=this.element;var b=this.win["3pla"]||{},c;for(c in b)if(Object.prototype.hasOwnProperty.call(b,c)){a=!1;break a}a="prefer-viewability-over-views"==a.getAttribute("data-loading-strategy")?1.25:!0}var d=a;return!0!==d?d:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};n.isLayoutSupported=function(a){return eb(a)};
n.buildCallback=function(){this.I=this.getPlaceholder();this.u=this.getFallback();var a=this.element.getAttribute("type");this.config=qa[a];z().assert(this.config,'Type "'+a+'" is not supported in amp-ad');var b=this.win;b.a2alistener||(b.a2alistener=!0,M(b,"alp")&&b.addEventListener("message",Ta.bind(null,b)))};
n.preconnectCallback=function(a){var b=this;kb(this.win,this.preconnect);"string"==typeof this.config.prefetch?this.preconnect.preload(this.config.prefetch,"script"):this.config.prefetch&&this.config.prefetch.forEach(function(a){b.preconnect.preload(a,"script")});"string"==typeof this.config.preconnect?this.preconnect.url(this.config.preconnect,a):this.config.preconnect&&this.config.preconnect.forEach(function(c){b.preconnect.url(c,a)});var c=this.element.getAttribute("src");c&&this.preconnect.url(c)};
n.onLayoutMeasure=function(){var a=this.win,b=!1,c=0,d=this.element;do mb[d.tagName]?(c++,b=!1):"fixed"==a.getComputedStyle(d).position&&(b=!0),d=d.parentElement;while(d&&"BODY"!=d.tagName);this.M=!(!b&&1>=c);if(void 0===this.G){a:{a=this.element;do if(a=a.parentElement,mb[a.tagName]){a=a.tagName;break a}while(a&&"BODY"!=a.tagName);a=null}this.G=a}ob(this);if(this.f)this.f.onLayoutMeasure()};
function ob(a){if(a.a){var b=a.getViewport().getLayoutRect(a.a),c=a.getLayoutBox();a.A=Ua(b,-c.left,-c.top)}}n.getIntersectionElementLayoutBox=function(){if(!this.a)return AMP.BaseElement.prototype.getIntersectionElementLayoutBox.call(this);var a=this.getLayoutBox();this.A||ob(this);return Ua(a,this.A.left,this.A.top)};
n.layoutCallback=function(){var a=this;if(this.B)return this.B;this.lifecycleReporter.sendPing("preAdThrottle");z().assert(!this.M,"<amp-ad> is not allowed to be placed in elements with position:fixed: %s",this.element);lb(this.win);return this.B=ra(this).then(function(b){var c={clientId:b||null,container:a.G};a.lifecycleReporter.sendPing("adRequestStart");a.a=ib(a.element.ownerDocument.defaultView,a.element,c);a.f=new U(a,a.element,a.V);return a.f.startUp(a.a,!0)})};
n.viewportCallback=function(a){this.f&&this.f.viewportCallback(a)};function nb(a){a.a&&(a.u||a.attemptChangeHeight(0).then(function(){a.collapse()},function(){}),a.deferMutate(function(){if(a.a&&(a.u&&(a.I&&a.togglePlaceholder(!1),a.toggleFallback(!0)),-1==a.a.name.indexOf("_master"))){var b=a.a;b.parentElement&&b.parentElement.removeChild(b);a.a=null}}))}
n.unlayoutCallback=function(){this.B=null;if(!this.a)return!0;this.I&&this.togglePlaceholder(!0);this.u&&this.toggleFallback(!1);this.a=null;this.f&&(this.f.unlayoutCallback(),this.f=null);this.lifecycleReporter.sendPing("adSlotCleared");return!0};function Z(a){AMP.BaseElement.apply(this,arguments)}p(Z,AMP.BaseElement);
Z.prototype.upgradeCallback=function(){var a=this,b=this.element.getAttribute("data-consent-notification-id");return(b?oa(this.win).then(function(a){return a.get(b)}):Promise.resolve()).then(function(){var b=a.element.getAttribute("type");if(!b)return null;if(!Ma[b]||!Ma[b](a.win,a.element))return new Y(a.element);var d="amp-ad-network-"+b+"-impl";a.element.setAttribute("data-a4a-upgrade-type",d);return ba(a.win,"extensions").loadElementClass(d).then(function(b){return new b(a.element)}).catch(function(c){z().error(a.element.tagName,"Unable to load ad implementation for type ",
b,", falling back to 3p, error: ",c);return new Y(a.element)})})};Z.prototype.isLayoutSupported=function(a){return eb(a)};Z.prototype.buildCallback=function(){this.element.getAttribute("type")};AMP.registerElement("amp-ad",Z);AMP.registerElement("amp-embed",Z);
})});
//# sourceMappingURL=amp-ad-0.1.js.map

